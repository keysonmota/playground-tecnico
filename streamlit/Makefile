.PHONY: help setup run clean install example

# Vari√°veis
VENV = .venv
PYTHON = $(VENV)/bin/python
PIP = $(VENV)/bin/pip
STREAMLIT = $(VENV)/bin/streamlit

help: ## Mostra esta ajuda
	@echo "Comandos dispon√≠veis:"
	@grep -E '^[a-zA-Z_-]+:.*?## .*$$' $(MAKEFILE_LIST) | sort | awk 'BEGIN {FS = ":.*?## "}; {printf "\033[36m%-20s\033[0m %s\n", $$1, $$2}'

setup: ## Configura o ambiente virtual e instala depend√™ncias
	@echo "üöÄ Configurando ambiente..."
	python3 -m venv $(VENV)
	$(PIP) install --upgrade pip
	$(PIP) install -r requirements.txt
	@echo "‚úÖ Setup conclu√≠do!"

install: ## Instala depend√™ncias no ambiente virtual
	$(PIP) install -r requirements.txt

run: ## Executa a aplica√ß√£o Streamlit
	$(STREAMLIT) run exemplo_basico.py

run-auto: ## Executa setup e aplica√ß√£o automaticamente
	@$(MAKE) setup
	@$(MAKE) example
	@$(MAKE) run

example: ## Cria exemplo b√°sico
	python3 create_example.py

clean: ## Remove ambiente virtual
	rm -rf $(VENV)
	@echo "üßπ Ambiente virtual removido"

activate: ## Mostra comando para ativar ambiente virtual
	@echo "Para ativar o ambiente virtual, execute:"
	@echo "source $(VENV)/bin/activate"

check: ## Verifica se o ambiente est√° configurado
	@if [ -d "$(VENV)" ]; then \
		echo "‚úÖ Ambiente virtual existe"; \
		$(PYTHON) --version; \
	else \
		echo "‚ùå Ambiente virtual n√£o encontrado. Execute 'make setup'"; \
	fi